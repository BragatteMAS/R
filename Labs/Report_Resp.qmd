---
title: "Report Resp"
author: "Bragatte"
format: html
editor: visual
data: 2023-12-20
---

## Report Resp

Última análise de dados de patógenos respiratórios da semana \`50\`.

```{r setup}
knitr::opts_chunk$set(echo = TRUE, collapse = TRUE, error = FALSE, warning = FALSE, message = FALSE, cache = TRUE, results = 'asis')
```

### Semana 50

```{r}
## chama bibliotecas
pacman::p_load(tidyverse, vroom)

## dados
combined <-
  vroom("combined.tsv")
```

#### Avaliando o dataset

```{r}
# glimpse(combined)
```

#### Quantidade de resultados positivos e negativos de Covid por lab:

```{r}
## test_result SARS-CoV-2 by labs
table(combined$SC2_test_result, combined$lab_id)
```

#### Quantidade de tipos de testes por laboratório:

```{r}
## test_kit by labs
table(combined$test_kit, combined$lab_id)
```

#### Quantidade de testes Positivos e Negativos por estado:

```{r}
## Test by state
table(combined$state, combined$SC2_test_result)
```

### Labs por estado

```{r}
table(combined$state, combined$lab_id)
```

#### Número de testes por laboratório na última semana:

```{r}
## test_lab by last week
### EDITAR AQUI SEMANA DE INTERESSE
last_week <- combined[combined$epiweek == "2023-12-16", ] 
table(last_week$lab_id, last_week$epiweek)
```

#### Quantidade de testes Positivos e Negativos por laboratório na última semana

```{r}
## test_lab by test_results in last week 
table(last_week$lab_id, last_week$SC2_test_result)
```

## Saved as .csv for endpoints

```{r}
## save as csv
# write.csv(combined, file = "combined.csv")

#Exportando o arquivo em .csv
#write_excel_csv2(x = combined,
#                 file = "combined.csv", delim = ",")
```

### Verificações específicas

#### Especificar semana de interesse

```{r}
last_weekXX <- combined[combined$epiweek == "2023-12-16", ] # alterar a data conforme calendário SINAN
```

#### Quantidade de dados dos laboratórios por estado na semana XX

```{r}
## state by lab last week XX
table(last_weekXX$state, last_weekXX$lab_id)
```

#### Quantidade de testes por estado na última semana

```{r}
## state by cases last week
table(last_week$state, last_week$epiweek)
```

#### Quantidade de testes para o patógeno X na semana XX

```{r}
## what tribble does?
## https://www.rdocumentation.org/packages/tibble/versions/3.1.2/topics/tribble
tribble(last_weekXX$state, last_weekXX$lab_id)
```
